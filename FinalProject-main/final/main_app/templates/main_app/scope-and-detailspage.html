{% extends 'main_app/home_page.html' %}
{% load static %}
{% block content %}
    <main>
    <section class="report-generation">
        <form id="reportForm" method="POST">
            {% csrf_token %}
            <h2>Scope</h2>
            <textarea id="scope-comments" name="scope-comments" placeholder="Enter any additional comments">{{ company.scope }}</textarea>
            
            <label for="description">Description</label>
            <textarea id="description" name="description" placeholder="Enter the description">{{ company.description }}</textarea>
            
            <!-- Dropdown for selecting a company -->
            <label for="company-select">Select a Company</label>
            <select id="company-select" name="company-select" onchange="updateCompanyInfo()">
                {% for company in companies %}
                    <option value="{{ company.id }}">{{ company.name }}</option>
                {% endfor %}
            </select>

            <!-- Sub-Controls Selection -->
            <h3>Select Sub-Controls for Auditing</h3>
            {% for control in sub_controls_list %}
                <label>
                    <input type="checkbox" name="sub-controls" value="{{ control }}">
                    {{ control }}
                </label>
            {% endfor %}

            <button type="submit" class="Generate-report">Save Changes</button>
        </form>
    </section>
</main>

<script>
    function updateCompanyInfo() {
        // This function can be enhanced to dynamically update scope and description based on the selected company.
        const companyId = document.getElementById('company-select').value;
        // Fetch company details via an AJAX request, for instance, if you wish to populate scope and description dynamically
    }
</script>

    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        height: 100vh;
    }

    header {
        background-color: rgb(0, 0, 0);
        padding: 10px 20px;
        border-bottom: 1px solid #535353;
    }

    nav ul {
        display: flex;
        justify-content: space-between;
        list-style: none;
    }

    nav ul li {
        margin-right: 15px;
    }

    nav ul li a,
    .login {
        text-decoration: none;
        color: black;
        padding: 8px 12px;
        border-radius: 5px; 
        border: none;
        background-color: #f4f4f4;
        cursor: pointer;
        border-color: 1px solid #ffffff;
    }

    main {
        display: flex;
        align-items: flex-start; /* Align items to the top */
        height: 50vh;
        padding: 20px;
    }

    .report-generation {
        width: 1500px; /* Allow the form to take the full width */
    }

    .report-generation h2 {
        font-size: 26px;
        margin-bottom: 20px;
    }

    form {
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        max-width: 100%;
        margin-left: 0; /* Align the form to the left */
    }

    form label {
        display: block;
        margin-bottom: 8px;
    }

    form select, form textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #000000;
        border-radius: 10px;
    }

    form button {
        padding: 10px;
        background-color: black;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #selected-items {
        margin-top: 20px;
    }

    footer {
        background-color: white;
        padding: 20px;
        border-top: 1px solid #ddd;
    }
    </style>

    </html>
    {% endblock %}
